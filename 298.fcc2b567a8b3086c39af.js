(self.webpackChunkpet_link=self.webpackChunkpet_link||[]).push([[298],{6298:(e,n,t)=>{"use strict";t.r(n),t.d(n,{AuthModule:()=>w});var r=t(8583),i=t(4655),o=t(3679),a=t(8259),s=t.n(a),l=t(7716);let m=(()=>{class e{constructor(){this.emailRegexValidation="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"}equalPasswords(e,n){return t=>{var r,i,o,a;return(null===(r=t.get(e))||void 0===r?void 0:r.value)!==(null===(i=t.get(n))||void 0===i?void 0:i.value)?(null===(o=t.get(n))||void 0===o||o.setErrors({passwordsNotMatch:!0}),{passwordsNotMatch:!0}):(null===(a=t.get(n))||void 0===a||a.setErrors(null),null)}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=t(6518),c=t(8295),g=t(9983),d=t(6627),p=t(1095);let Z=(()=>{class e{constructor(e,n,t){this.validatorService=e,this.authService=n,this.router=t,this.loginForm=new o.cw({email:new o.NI(null,[o.kI.required,o.kI.pattern(this.validatorService.emailRegexValidation)]),password:new o.NI(null,[o.kI.required,o.kI.minLength(6)])})}get emailErrorMsg(){var e;const n=null===(e=this.loginForm.get("email"))||void 0===e?void 0:e.errors;return(null==n?void 0:n.required)?"El email es obligatorio":(null==n?void 0:n.pattern)?"El formato de email es incorrecto":""}get passwordErrorMsg(){var e;const n=null===(e=this.loginForm.get("password"))||void 0===e?void 0:e.errors;return(null==n?void 0:n.required)?"La contrase\xf1a es obligatoria":(null==n?void 0:n.minlength)?"La contrase\xf1a debe ser de al menos 6 caracteres":""}ngOnInit(){}submitForm(){if(this.loginForm.valid){const{email:e,password:n}=this.loginForm.value;this.authService.login({email:e,password:n}).then(e=>{this.router.navigateByUrl("/pets"),localStorage.setItem("userId",e.user.uid),this.authService.sendUserId()}).catch(e=>{switch(e.code){case"auth/wrong-password":s().fire({icon:"error",text:"La contrase\xf1a es incorrecta"});break;case"auth/user-not-found":s().fire({icon:"error",text:"No se ha encontrado ning\xfan usuario con el email ingresado"})}})}else console.log("Formulario inv\xe1lido")}}return e.\u0275fac=function(n){return new(n||e)(l.Y36(m),l.Y36(u.e),l.Y36(i.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-login"]],decls:30,vars:3,consts:[[1,"container"],[1,"login-img"],["src","./assets/login.png","alt",""],[1,"login-icon"],["src","./assets/login-icon.png","alt",""],[1,"login-form"],[1,"card"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"w-full"],["matInput","","type","email","formControlName","email"],["matSuffix",""],["matInput","","type","password","formControlName","password"],["routerLink","/auth/signup",1,"link"],["mat-flat-button","","color","primary","type","submit",1,"my-3"]],template:function(e,n){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._UZ(2,"img",2),l.qZA(),l.TgZ(3,"div",3),l._UZ(4,"img",4),l.qZA(),l.TgZ(5,"div",5),l.TgZ(6,"div",6),l.TgZ(7,"h2"),l._uU(8,"Inicia sesi\xf3n"),l.qZA(),l.TgZ(9,"form",7),l.NdJ("ngSubmit",function(){return n.submitForm()}),l.TgZ(10,"mat-form-field",8),l.TgZ(11,"mat-label"),l._uU(12,"Correo electr\xf3nico"),l.qZA(),l._UZ(13,"input",9),l.TgZ(14,"mat-icon",10),l._uU(15,"mail"),l.qZA(),l.TgZ(16,"mat-error"),l._uU(17),l.qZA(),l.qZA(),l.TgZ(18,"mat-form-field",8),l.TgZ(19,"mat-label"),l._uU(20,"Contrase\xf1a"),l.qZA(),l._UZ(21,"input",11),l.TgZ(22,"mat-icon",10),l._uU(23,"lock"),l.qZA(),l.TgZ(24,"mat-error"),l._uU(25),l.qZA(),l.qZA(),l.TgZ(26,"a",12),l._uU(27,"\xbfA\xfan no tienes una cuenta? Clic aqu\xed para registrarte"),l.qZA(),l.TgZ(28,"button",13),l._uU(29," Iniciar sesi\xf3n "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(9),l.Q6J("formGroup",n.loginForm),l.xp6(8),l.Oqu(n.emailErrorMsg),l.xp6(8),l.Oqu(n.passwordErrorMsg))},directives:[o._Y,o.JL,o.sg,c.KE,c.hX,g.Nt,o.Fj,o.JJ,o.u,d.Hw,c.R9,c.TO,i.yS,p.lW],styles:["img[_ngcontent-%COMP%]{width:80%}.container[_ngcontent-%COMP%]{min-height:80vh}.container[_ngcontent-%COMP%]   .login-img[_ngcontent-%COMP%]{animation:img-anim .8s ease}.container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{animation:form-anim .8s ease}.container[_ngcontent-%COMP%]   .login-icon[_ngcontent-%COMP%]{display:none}a[_ngcontent-%COMP%]{margin-bottom:24px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .login-img[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .login-icon[_ngcontent-%COMP%]{width:180px;display:flex;flex-direction:column;justify-content:center;align-items:center}}@keyframes form-anim{0%{opacity:0;transform:translateX(20%)}}@keyframes img-anim{0%{opacity:0;transform:translateX(-20%)}}"]}),e})();var f=t(3703),h=t(9666);const v=[{path:"",children:[{path:"login",component:Z},{path:"signup",component:(()=>{class e{constructor(e,n,t,r){this.validatorService=e,this.authService=n,this.router=t,this.userService=r,this.myauth=(0,f.v0)(),this.signupForm=new o.cw({name:new o.NI(null,[o.kI.required]),lastname:new o.NI(null,[o.kI.required]),email:new o.NI(null,[o.kI.required,o.kI.pattern(this.validatorService.emailRegexValidation)]),password:new o.NI(null,[o.kI.required,o.kI.minLength(6)]),password2:new o.NI(null,[o.kI.required])},{validators:[this.validatorService.equalPasswords("password","password2")]})}get emailErrorMsg(){var e;const n=null===(e=this.signupForm.get("email"))||void 0===e?void 0:e.errors;return(null==n?void 0:n.required)?"El email es obligatorio":(null==n?void 0:n.pattern)?"El formato de email es incorrecto":""}get passwordErrorMsg(){var e;const n=null===(e=this.signupForm.get("password"))||void 0===e?void 0:e.errors;return(null==n?void 0:n.required)?"La contrase\xf1a es obligatoria":(null==n?void 0:n.minlength)?"La contrase\xf1a debe ser de al menos 6 caracteres":""}ngOnInit(){}submitForm(){if(this.signupForm.valid){const{name:e,lastname:n,email:t,password:r}=this.signupForm.value;this.authService.register({email:t,password:r}).then(()=>{(0,f.Aj)(this.myauth,r=>{r&&(this.userService.addUser({uid:r.uid,name:e,lastname:n,email:t}),localStorage.setItem("userId",r.uid),this.authService.sendUserId())}),this.router.navigateByUrl("/pets")}).catch(e=>{switch(e.code){case"auth/email-already-in-use":s().fire({icon:"error",text:"Ya existe un usuario con el email ingresado"})}})}else console.log("Formulario inv\xe1lido")}}return e.\u0275fac=function(n){return new(n||e)(l.Y36(m),l.Y36(u.e),l.Y36(i.F0),l.Y36(h.K))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-signup"]],decls:54,vars:3,consts:[[1,"container"],[1,"signup-img"],["src","./assets/signup.png","alt",""],[1,"signup-icon"],["src","./assets/signup-icon.png","alt",""],[1,"signup-form"],[1,"card"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"w-full"],["matInput","","type","text","formControlName","name"],["matSuffix",""],["matInput","","type","text","formControlName","lastname"],["matInput","","type","email","formControlName","email"],["matInput","","type","password","formControlName","password"],["matInput","","type","password","formControlName","password2"],["routerLink","/auth/login",1,"link"],["mat-flat-button","","color","primary","type","submit",1,"my-3"]],template:function(e,n){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._UZ(2,"img",2),l.qZA(),l.TgZ(3,"div",3),l._UZ(4,"img",4),l.qZA(),l.TgZ(5,"div",5),l.TgZ(6,"div",6),l.TgZ(7,"h2"),l._uU(8,"Crea tu cuenta"),l.qZA(),l.TgZ(9,"form",7),l.NdJ("ngSubmit",function(){return n.submitForm()}),l.TgZ(10,"mat-form-field",8),l.TgZ(11,"mat-label"),l._uU(12,"Nombre"),l.qZA(),l._UZ(13,"input",9),l.TgZ(14,"mat-icon",10),l._uU(15,"sentiment_very_satisfied"),l.qZA(),l.TgZ(16,"mat-error"),l._uU(17,"El nombre es obligatorio"),l.qZA(),l.qZA(),l.TgZ(18,"mat-form-field",8),l.TgZ(19,"mat-label"),l._uU(20,"Apellidos"),l.qZA(),l._UZ(21,"input",11),l.TgZ(22,"mat-icon",10),l._uU(23,"sentiment_very_satisfied"),l.qZA(),l.TgZ(24,"mat-error"),l._uU(25,"El apellido es obligatorio"),l.qZA(),l.qZA(),l.TgZ(26,"mat-form-field",8),l.TgZ(27,"mat-label"),l._uU(28,"Correo electr\xf3nico"),l.qZA(),l._UZ(29,"input",12),l.TgZ(30,"mat-error"),l._uU(31),l.qZA(),l.TgZ(32,"mat-icon",10),l._uU(33,"mail"),l.qZA(),l.qZA(),l.TgZ(34,"mat-form-field",8),l.TgZ(35,"mat-label"),l._uU(36,"Contrase\xf1a"),l.qZA(),l._UZ(37,"input",13),l.TgZ(38,"mat-error"),l._uU(39),l.qZA(),l.TgZ(40,"mat-icon",10),l._uU(41,"lock"),l.qZA(),l.qZA(),l.TgZ(42,"mat-form-field",8),l.TgZ(43,"mat-label"),l._uU(44,"Confirma tu contrase\xf1a"),l.qZA(),l._UZ(45,"input",14),l.TgZ(46,"mat-icon",10),l._uU(47,"lock"),l.qZA(),l.TgZ(48,"mat-error"),l._uU(49,"Las contrase\xf1as no coinciden"),l.qZA(),l.qZA(),l.TgZ(50,"a",15),l._uU(51,"\xbfYa tienes una cuenta? Clic aqu\xed para iniciar sesi\xf3n"),l.qZA(),l.TgZ(52,"button",16),l._uU(53," Crear cuenta "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(9),l.Q6J("formGroup",n.signupForm),l.xp6(22),l.Oqu(n.emailErrorMsg),l.xp6(8),l.Oqu(n.passwordErrorMsg))},directives:[o._Y,o.JL,o.sg,c.KE,c.hX,g.Nt,o.Fj,o.JJ,o.u,d.Hw,c.R9,c.TO,i.yS,p.lW],styles:["img[_ngcontent-%COMP%]{width:90%}.container[_ngcontent-%COMP%]{min-height:80vh}.container[_ngcontent-%COMP%]   .signup-img[_ngcontent-%COMP%]{animation:img-anim .8s ease}.container[_ngcontent-%COMP%]   .signup-form[_ngcontent-%COMP%]{animation:form-anim .8s ease}.container[_ngcontent-%COMP%]   .signup-icon[_ngcontent-%COMP%]{display:none}a[_ngcontent-%COMP%]{margin-bottom:16px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .signup-img[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .signup-icon[_ngcontent-%COMP%]{width:180px;display:flex;flex-direction:column;justify-content:center;align-items:center}}@keyframes form-anim{0%{opacity:0;transform:translateX(20%)}}@keyframes img-anim{0%{opacity:0;transform:translateX(-20%)}}"]}),e})()},{path:"**",redirectTo:"login"}]}];let _=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.Bz.forChild(v)],i.Bz]}),e})();var q=t(5317);let w=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.ez,_,q.q,o.UX]]}),e})()}}]);