(self.webpackChunkpet_link=self.webpackChunkpet_link||[]).push([[859],{859:(t,e,n)=>{"use strict";n.r(e),n.d(e,{PetsModule:()=>W});var i=n(8583),o=n(4655),r=n(3679),c=n(3706),a=n(8259),s=n.n(a),d=n(7716),p=n(6518),g=n(961),l=n(5621),m=n(7001),u=n(6627),f=n(8295),_=n(9983),h=n(7441),O=n(1095),C=n(2458);function P(t,e){if(1&t&&(d.TgZ(0,"mat-option",23),d._uU(1),d.ALo(2,"titlecase"),d.qZA()),2&t){const t=e.$implicit;d.Q6J("value",t),d.xp6(1),d.hij(" ",d.lcZ(2,2,t)," ")}}let Z=(()=>{class t{constructor(t,e,n,i,o,c){this.storage=t,this.authService=e,this.auth=n,this.petService=i,this.snackbar=o,this.router=c,this.isImgSelected=!1,this.animalKind=["dog","cat","bird","other"],this.addPetForm=new r.cw({name:new r.NI(null,[r.kI.required]),description:new r.NI(null,[r.kI.required]),kind:new r.NI(null,[r.kI.required]),age:new r.NI(null,[r.kI.required]),location:new r.NI(null,[r.kI.required])}),this.currentUserId="",this.imageUrl=""}ngOnInit(){var t;this.currentUserId=null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid,this.authService.sendUserId()}submitForm(){this.addPetForm.invalid?s().fire({icon:"warning",text:"Debes rellenar todos los campos"}):s().fire({icon:"question",text:"\xbfEst\xe1s seguro que deseas publicarlo?",showCancelButton:!0,confirmButtonText:"Si, quiero publicarlo!",cancelButtonText:"Quiz\xe1s m\xe1s tarde",reverseButtons:!0,confirmButtonColor:"#F2B84B"}).then(t=>{t.isConfirmed&&s().fire({title:"\xa1Tu mascota ha sido publicada!",icon:"success",confirmButtonText:"OK!",confirmButtonColor:"#F2B84B"}).then(t=>{t.isConfirmed&&(this.uploadPet(),this.router.navigateByUrl("/pets"))})})}showPreview(t){if(t.target.files){this.fileUpload=t.target.files[0],this.isImgSelected=!0;var e=new FileReader;e.readAsDataURL(t.target.files[0]),e.onload=t=>{this.imageUrl=t.target.result}}}uploadPet(){const t=this.fileUpload,e=(0,c.iH)(this.storage,`images/${t.name}`),n=(0,c.B0)(e,t);n.on("state_changed",()=>{console.log("Uploading img...")},t=>{console.log(t)},()=>{(0,c.Jt)(n.snapshot.ref).then(t=>{const e=Object.assign(Object.assign({},this.addPetForm.value),{photoUrl:t,ownerId:this.currentUserId,postDate:(new Date).toISOString()});this.petService.addPet(e).then(t=>{console.log(t)}).catch(t=>{console.log(t)})})})}cancel(){this.router.navigateByUrl("pets")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(c.Ke),d.Y36(p.e),d.Y36(g.gx),d.Y36(l.O),d.Y36(m.ux),d.Y36(o.F0))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-add-pet"]],decls:54,vars:3,consts:[[1,"add-container"],[1,"card"],[1,"update-profile"],[1,"user-image"],[1,"user-image-pic"],[1,"img"],["alt","",3,"src"],["type","file","id","file","accept","image/*",3,"change"],["for","file"],[1,"user-form"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"w-full"],["matInput","","type","email","formControlName","name"],["matInput","","formControlName","description"],[1,"grid"],[1,"col-6"],["formControlName","kind"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","age"],["matInput","","type","text","formControlName","location"],[1,"buttons"],["mat-stroked-button","","color","primary","type","button",3,"click"],["mat-flat-button","","color","primary","type","submit",3,"click"],[3,"value"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h2"),d._uU(3,"\xa1Agregar una mascota!"),d.qZA(),d.TgZ(4,"div",2),d.TgZ(5,"div",3),d.TgZ(6,"div",4),d.TgZ(7,"div",5),d._UZ(8,"img",6),d.qZA(),d.TgZ(9,"input",7),d.NdJ("change",function(t){return e.showPreview(t)}),d.qZA(),d.TgZ(10,"label",8),d.TgZ(11,"mat-icon"),d._uU(12,"add_a_photo"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",9),d.TgZ(14,"form",10),d.NdJ("ngSubmit",function(){return e.submitForm()}),d.TgZ(15,"mat-form-field",11),d.TgZ(16,"mat-label"),d._uU(17,"Nombre"),d.qZA(),d._UZ(18,"input",12),d.TgZ(19,"mat-error"),d._uU(20,"El nombre es obligatorio"),d.qZA(),d.qZA(),d.TgZ(21,"mat-form-field",11),d.TgZ(22,"mat-label"),d._uU(23,"Descripci\xf3n"),d.qZA(),d._UZ(24,"textarea",13),d.TgZ(25,"mat-error"),d._uU(26,"La descripci\xf3n es obligatoria"),d.qZA(),d.qZA(),d.TgZ(27,"div",14),d.TgZ(28,"div",15),d.TgZ(29,"mat-form-field",11),d.TgZ(30,"mat-label"),d._uU(31,"Tipo"),d.qZA(),d.TgZ(32,"mat-select",16),d.YNc(33,P,3,4,"mat-option",17),d.qZA(),d.TgZ(34,"mat-error"),d._uU(35,"Debes seleccionar un tipo"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(36,"div",15),d.TgZ(37,"mat-form-field",11),d.TgZ(38,"mat-label"),d._uU(39,"Edad"),d.qZA(),d._UZ(40,"input",18),d.TgZ(41,"mat-error"),d._uU(42,"La edad es obligatoria"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(43,"mat-form-field",11),d.TgZ(44,"mat-label"),d._uU(45,"Ubicaci\xf3n"),d.qZA(),d._UZ(46,"input",19),d.TgZ(47,"mat-error"),d._uU(48,"La ubicaci\xf3n os obligatoria"),d.qZA(),d.qZA(),d.TgZ(49,"div",20),d.TgZ(50,"button",21),d.NdJ("click",function(){return e.cancel()}),d._uU(51," Cancelar "),d.qZA(),d.TgZ(52,"button",22),d.NdJ("click",function(){return e.submitForm()}),d._uU(53," Aceptar "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(8),d.Q6J("src",e.imageUrl,d.LSH),d.xp6(6),d.Q6J("formGroup",e.addPetForm),d.xp6(19),d.Q6J("ngForOf",e.animalKind))},directives:[u.Hw,r._Y,r.JL,r.sg,f.KE,f.hX,_.Nt,r.Fj,r.JJ,r.u,f.TO,h.gD,i.sg,r.wV,O.lW,C.ey],pipes:[i.rS],styles:[".card[_ngcontent-%COMP%]{width:900px}.add-container[_ngcontent-%COMP%]{min-height:85vh;display:flex;justify-content:center;align-items:center}.update-profile[_ngcontent-%COMP%]{width:800px;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:24px;gap:24px}.update-profile[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{width:100%;height:100%;padding:0 8px}.update-profile[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .user-image-pic[_ngcontent-%COMP%]{position:relative;background-color:#f5f5f5;border-radius:8px}.update-profile[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .user-image-pic[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;overflow:hidden;width:100%;height:385px;border-radius:8px}.update-profile[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%], .update-profile[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .user-image-pic[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.update-profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:right;grid-gap:16px;gap:16px}input[type=file][_ngcontent-%COMP%]{display:none}.btn[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{background-color:#1e90ff;padding:16px;border-radius:8px;color:#fff;font-family:inherit;border:none;border-radius:50%;font-size:16px;display:flex;justify-content:center;align-items:center;cursor:pointer;transition:all .3s ease;position:absolute;bottom:-24px;left:50%;transform:translateX(-50%)}label[_ngcontent-%COMP%]:hover{background-color:#177fe8}@media (max-width: 992px){.add-container[_ngcontent-%COMP%]{padding:24px}.add-container[_ngcontent-%COMP%]   .add-card[_ngcontent-%COMP%]{width:80%}.update-profile[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.update-profile[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]{width:100%}.update-profile[_ngcontent-%COMP%]   .user-image[_ngcontent-%COMP%]   .user-image-pic[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{height:280px}}"]}),t})();var M=n(4885),x=n(1113),b=n(2467);function v(t,e){1&t&&(d.TgZ(0,"div",3),d._UZ(1,"mat-spinner"),d.qZA())}const q=function(t){return["/user",t]};function A(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",4),d.TgZ(1,"div",5),d._UZ(2,"img",6),d.qZA(),d.TgZ(3,"div",7),d.TgZ(4,"div",8),d.TgZ(5,"h2"),d._uU(6),d.qZA(),d.TgZ(7,"span"),d._uU(8,"Descripci\xf3n"),d.qZA(),d.TgZ(9,"p"),d._uU(10),d.qZA(),d.TgZ(11,"span"),d._uU(12,"Fecha de publicaci\xf3n"),d.qZA(),d.TgZ(13,"p"),d._uU(14),d.ALo(15,"date"),d.qZA(),d.qZA(),d.TgZ(16,"div",9),d.TgZ(17,"div",10),d._UZ(18,"img",11),d.TgZ(19,"p"),d._uU(20),d.ALo(21,"i18nPlural"),d.qZA(),d.qZA(),d.TgZ(22,"div",12),d._UZ(23,"img",6),d.ALo(24,"pipeImg"),d.TgZ(25,"p"),d._uU(26),d.ALo(27,"pipeKind"),d.qZA(),d.qZA(),d.TgZ(28,"div",13),d._UZ(29,"img",14),d.TgZ(30,"p"),d._uU(31),d.qZA(),d.qZA(),d.qZA(),d.TgZ(32,"div",15),d.TgZ(33,"button",16),d._uU(34," Contactar con el due\xf1o "),d.qZA(),d.TgZ(35,"button",17),d.NdJ("click",function(){return d.CHM(t),d.oxw().addComment()}),d.TgZ(36,"mat-icon"),d._uU(37,"send"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(2),d.Q6J("src",t.pet.photoUrl,d.LSH),d.xp6(4),d.Oqu(t.pet.name),d.xp6(4),d.Oqu(t.pet.description),d.xp6(4),d.Oqu(d.xi3(15,10,t.pet.postDate,"medium")),d.xp6(6),d.AsE("",t.pet.age," ",d.xi3(21,13,t.pet.age,t.ageMap),""),d.xp6(3),d.Q6J("src",d.lcZ(24,16,t.pet.kind),d.LSH),d.xp6(3),d.Oqu(d.lcZ(27,18,t.pet.kind)),d.xp6(5),d.Oqu(t.pet.location),d.xp6(2),d.Q6J("routerLink",d.VKq(20,q,t.pet.ownerId))}}let w=(()=>{class t{constructor(t,e,n,i){this.activatedRoute=t,this.petsService=e,this.router=n,this.authService=i,this.isLoading=!0,this.petId="",this.ageMap={"=1":"a\xf1o",other:"a\xf1os"}}ngOnInit(){this.authService.sendUserId(),this.activatedRoute.params.subscribe(({id:t})=>{this.petId=t,this.petsService.getPetById(t).subscribe(t=>{this.pet=t,this.isLoading=!1})})}addComment(){this.router.navigateByUrl(`pets/${this.petId}/comments`)}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.gz),d.Y36(l.O),d.Y36(o.F0),d.Y36(p.e))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-pet-detail"]],decls:3,vars:2,consts:[[1,"pet-detail-container"],["class","spinner",4,"ngIf"],["class","card",4,"ngIf"],[1,"spinner"],[1,"card"],[1,"img"],["alt","",3,"src"],[1,"info"],[1,"info-header"],[1,"info-items"],[1,"item-age"],["src","assets/icons/age.png","alt",""],[1,"item-kind"],[1,"item-location"],["src","assets/icons/location.png","alt",""],[1,"info-footer"],["mat-stroked-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.YNc(1,v,2,0,"div",1),d.YNc(2,A,38,22,"div",2),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",e.isLoading),d.xp6(1),d.Q6J("ngIf",!e.isLoading))},directives:[i.O5,M.$g,O.lW,o.rH,u.Hw],pipes:[i.uU,i.Gx,x.b,b.b],styles:[".pet-detail-container[_ngcontent-%COMP%]{min-height:85vh;display:flex;justify-content:center;align-items:center}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:800px;display:grid;grid-template-columns:repeat(2,1fr);padding:24px;grid-gap:24px;gap:24px}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{overflow:hidden;height:420px;border-radius:8px;display:flex;justify-content:center;align-items:center}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{text-align:left;display:flex;flex-direction:column;justify-content:space-between}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2em}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#adadad;margin-bottom:8px;font-size:.9em}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:30%;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:8px;border-radius:8px}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40%;margin:8px 0}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:8px;color:#000}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   .item-age[_ngcontent-%COMP%]{background-color:#fff4e5;border:1px solid #f2b84b}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   .item-kind[_ngcontent-%COMP%]{background-color:#f8fdf5;border:1px solid #95b18c}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .info-items[_ngcontent-%COMP%]   .item-location[_ngcontent-%COMP%]{background-color:#f2f7fa;border:1px solid #9cb8c9}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .info-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}@media (max-width: 992px){.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:90%}}@media (max-width: 768px){.pet-detail-container[_ngcontent-%COMP%]{padding:48px}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:column}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info-footer[_ngcontent-%COMP%]{margin-top:24px}}@media (max-width: 576px){.pet-detail-container[_ngcontent-%COMP%]{padding:16px}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{height:300px}.pet-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .info-footer[_ngcontent-%COMP%]{margin-top:24px}}"]}),t})();var y=n(8002),T=n(1769);let U=(()=>{class t{constructor(){this.kindFilter="",this.sortByFilter="",this.onKindEmitted=new d.vpe,this.onSortByEmitted=new d.vpe}ngOnInit(){}onKind(){this.onKindEmitted.emit(this.kindFilter)}onSort(){this.onSortByEmitted.emit(this.sortByFilter)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-toolbar"]],outputs:{onKindEmitted:"onKindEmitted",onSortByEmitted:"onSortByEmitted"},decls:29,vars:2,consts:[[1,"toolbar"],[1,"toolbar-container"],["mat-stroked-button","","color","primary","routerLink","/pets/add"],[1,"filters"],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],["value","latest"],["value","oldest"],["value","all"],["value","dog"],["value","cat"],["value","bird"],["value","other"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div"),d.TgZ(3,"a",2),d._uU(4," \xa1Quiero dar una mascota en adopci\xf3n! "),d.qZA(),d.qZA(),d.TgZ(5,"div",3),d.TgZ(6,"mat-form-field",4),d.TgZ(7,"mat-label"),d._uU(8,"Ordenar por:"),d.qZA(),d.TgZ(9,"mat-select",5),d.NdJ("ngModelChange",function(t){return e.sortByFilter=t})("selectionChange",function(){return e.onSort()}),d.TgZ(10,"mat-option",6),d._uU(11,"M\xe1s recientes"),d.qZA(),d.TgZ(12,"mat-option",7),d._uU(13,"M\xe1s antig\xfcos"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"mat-form-field",4),d.TgZ(15,"mat-label"),d._uU(16,"Filtrar por tipo"),d.qZA(),d.TgZ(17,"mat-select",5),d.NdJ("ngModelChange",function(t){return e.kindFilter=t})("selectionChange",function(){return e.onKind()}),d.TgZ(18,"mat-option",8),d._uU(19,"Todos"),d.qZA(),d.TgZ(20,"mat-option",9),d._uU(21,"Perros"),d.qZA(),d.TgZ(22,"mat-option",10),d._uU(23,"Gatos"),d.qZA(),d.TgZ(24,"mat-option",11),d._uU(25,"Aves"),d.qZA(),d.TgZ(26,"mat-option",12),d._uU(27,"Otros"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(28,"mat-divider"),d.qZA()),2&t&&(d.xp6(9),d.Q6J("ngModel",e.sortByFilter),d.xp6(8),d.Q6J("ngModel",e.kindFilter))},directives:[O.zs,o.yS,f.KE,f.hX,h.gD,r.JJ,r.On,C.ey,T.d],styles:[".toolbar[_ngcontent-%COMP%]{width:90%;margin:16px auto}.toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}mat-form-field[_ngcontent-%COMP%]{margin:0 8px}@media (max-width: 768px){.toolbar-container[_ngcontent-%COMP%]{flex-direction:column-reverse}mat-divider[_ngcontent-%COMP%]{display:none}}@media (max-width: 576px){.filters[_ngcontent-%COMP%]{display:flex}.mat-form-field[_ngcontent-%COMP%]{width:140px}}"]}),t})(),k=(()=>{class t{constructor(t){this.router=t}ngOnInit(){}goPetDetail(){this.router.navigateByUrl(`/pets/${this.pet.id}`)}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.F0))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-pet-card"]],inputs:{pet:"pet"},decls:16,vars:4,consts:[[1,"pet-card",3,"click"],[1,"image"],["alt","",3,"src"],[1,"info"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.NdJ("click",function(){return e.goPetDetail()}),d.TgZ(1,"div",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"h2"),d._uU(4),d.qZA(),d.TgZ(5,"div",3),d.TgZ(6,"div"),d.TgZ(7,"mat-icon"),d._uU(8,"pin_drop"),d.qZA(),d.TgZ(9,"p"),d._uU(10),d.qZA(),d.qZA(),d.TgZ(11,"div"),d.TgZ(12,"mat-icon"),d._uU(13,"wb_sunny"),d.qZA(),d.TgZ(14,"p"),d._uU(15),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(2),d.Q6J("src",e.pet.photoUrl,d.LSH),d.xp6(2),d.Oqu(e.pet.name),d.xp6(6),d.Oqu(e.pet.location),d.xp6(5),d.hij("",e.pet.age," a\xf1os"))},directives:[u.Hw],styles:[".pet-card[_ngcontent-%COMP%]{width:270px;background-color:#fff;box-shadow:0 5px 12px #0000001a;border-radius:8px;padding:18px;transition:all .4s ease;cursor:pointer}.pet-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%;height:240px;border-radius:8px;overflow:hidden;display:flex;justify-content:center;align-items:center}.pet-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.pet-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:8px 0;-webkit-line-clamp:1}.pet-card[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .pet-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical}.pet-card[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{-webkit-line-clamp:2;margin-bottom:24px}.pet-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.pet-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;grid-gap:8px;gap:8px}.pet-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}"]}),t})();function I(t,e){1&t&&(d.TgZ(0,"div",3),d._UZ(1,"mat-spinner"),d.qZA())}function F(t,e){1&t&&d._UZ(0,"app-pet-card",6),2&t&&d.Q6J("pet",e.$implicit)}function S(t,e){if(1&t&&(d.TgZ(0,"div",4),d.YNc(1,F,1,1,"app-pet-card",5),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.Q6J("ngForOf",t.pets)}}let J=(()=>{class t{constructor(t,e){this.petsService=t,this.authService=e,this.pets=[],this.isLoading=!0,this.sortBy="",this.kindFilter="all"}ngOnInit(){this.getPets(),this.authService.sendUserId()}getKindFilter(t){this.kindFilter=t,this.getPets()}getSortByFilter(t){this.sortBy=t,this.getPets()}getPets(){this.petsService.getAllPets().pipe((0,y.U)(t=>{let e=t;return"all"!==this.kindFilter&&(e=t.filter(t=>t.kind===this.kindFilter)),e.sort("oldest"===this.sortBy?(t,e)=>new Date(t.postDate).setHours(0,0,0,0)-new Date(e.postDate).setHours(0,0,0,0):(t,e)=>t.name<e.name?1:-1),e})).subscribe(t=>{this.pets=t,this.isLoading=!1})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.O),d.Y36(p.e))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-pets"]],decls:3,vars:2,consts:[[3,"onKindEmitted","onSortByEmitted"],["class","spinner-container",4,"ngIf"],["class","pets-container",4,"ngIf"],[1,"spinner-container"],[1,"pets-container"],[3,"pet",4,"ngFor","ngForOf"],[3,"pet"]],template:function(t,e){1&t&&(d.TgZ(0,"app-toolbar",0),d.NdJ("onKindEmitted",function(t){return e.getKindFilter(t)})("onSortByEmitted",function(t){return e.getSortByFilter(t)}),d.qZA(),d.YNc(1,I,2,0,"div",1),d.YNc(2,S,2,1,"div",2)),2&t&&(d.xp6(1),d.Q6J("ngIf",e.isLoading),d.xp6(1),d.Q6J("ngIf",!e.isLoading))},directives:[U,i.O5,M.$g,i.sg,k],styles:[".pets-container[_ngcontent-%COMP%]{width:90%;margin:32px auto;flex-wrap:wrap;grid-gap:16px}.pets-container[_ngcontent-%COMP%], .spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.spinner-container[_ngcontent-%COMP%]{min-height:70vh;width:100%;align-items:center}"]}),t})();var B=n(4251),j=n(3703),N=n(1841),L=n(205),Y=n(5304);let Q=(()=>{class t{constructor(t){this.http=t}addCommentByPet(t,e){return this.http.post(`https://tfg-daw-default-rtdb.europe-west1.firebasedatabase.app/pets/${t}.json`,e)}fetchPosts(t){let e=new N.LE;return e=e.append("print","pretty"),e=e.append("custom","key"),this.http.get(`https://tfg-daw-default-rtdb.europe-west1.firebasedatabase.app/pets/${t}.json`,{headers:new N.WM({"Custom-header":"Hello"}),params:e}).pipe((0,y.U)(t=>{const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(Object.assign({},t[n]));return e}),(0,Y.K)(t=>(0,L._)(t)))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(N.eN))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var E=n(9666);let K=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-comment"]],inputs:{comment:"comment"},decls:11,vars:7,consts:[[1,"card"],[1,"img"],["alt","",3,"src"],[1,"message"],[1,"message-date"],[1,"message-text"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d._UZ(2,"img",2),d.qZA(),d.TgZ(3,"div",3),d.TgZ(4,"h4"),d._uU(5),d.qZA(),d.TgZ(6,"p",4),d._uU(7),d.ALo(8,"date"),d.qZA(),d.TgZ(9,"p",5),d._uU(10),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(2),d.Q6J("src",e.comment.emitterImg,d.LSH),d.xp6(3),d.Oqu(e.comment.emitterName),d.xp6(2),d.hij("Publicado el ",d.xi3(8,4,e.comment.date,"full"),""),d.xp6(3),d.hij(" ",e.comment.text," "))},pipes:[i.uU],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 0 5px #0000001a;text-align:left;display:flex;flex-direction:row;justify-content:space-between;padding:24px;margin-bottom:8px}.card[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:60px;height:60px;overflow:hidden;display:flex;justify-content:center;align-items:center;border-radius:50%}.card[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{width:85%}.card[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;margin-bottom:4px}.card[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-date[_ngcontent-%COMP%]{font-size:.8em;color:#aaa;margin-bottom:16px}.card[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{font-size:.95em}"]}),t})();function D(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",4),d.TgZ(1,"div",5),d.TgZ(2,"div",6),d._UZ(3,"img",7),d.qZA(),d.TgZ(4,"div",8),d.TgZ(5,"h2"),d._uU(6),d.qZA(),d.TgZ(7,"div",9),d.TgZ(8,"div"),d._uU(9," Edad "),d.TgZ(10,"p"),d._uU(11),d.qZA(),d.qZA(),d.TgZ(12,"div",10),d._uU(13," Tipo "),d.TgZ(14,"p"),d._uU(15),d.ALo(16,"pipeKind"),d.qZA(),d.qZA(),d.TgZ(17,"div"),d._uU(18," Ubicaci\xf3n "),d.TgZ(19,"p"),d._uU(20),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"form",11),d._UZ(22,"input",12),d.TgZ(23,"button",13),d.NdJ("click",function(){return d.CHM(t),d.oxw().sendComment()}),d.TgZ(24,"mat-icon"),d._uU(25,"send"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(3),d.Q6J("src",t.pet.photoUrl,d.LSH),d.xp6(3),d.Oqu(t.pet.name),d.xp6(5),d.Oqu(t.pet.age),d.xp6(4),d.Oqu(d.lcZ(16,7,t.pet.kind)),d.xp6(5),d.Oqu(t.pet.location),d.xp6(1),d.Q6J("formGroup",t.commentForm),d.xp6(2),d.Q6J("disabled",t.commentForm.invalid)}}function H(t,e){1&t&&d._UZ(0,"app-comment",14),2&t&&d.Q6J("comment",e.$implicit)}let z=(()=>{class t{constructor(t,e,n,i,o){this.activatedRoute=t,this.commentsService=e,this.usersService=n,this.petsService=i,this.authService=o,this.petId="",this.text="",this.comments=[],this.myauth=(0,j.v0)(),this.commentForm=new r.cw({comment:new r.NI(null,[r.kI.required])})}ngOnInit(){this.authService.sendUserId(),this.activatedRoute.params.subscribe(({id:t})=>{this.petId=t,this.petsService.getPetById(this.petId).subscribe(t=>{this.pet=t})}),this.getComments(),(0,j.Aj)(this.myauth,t=>{const e=null==t?void 0:t.uid;e&&this.usersService.getUserById(e).pipe((0,y.U)(t=>t.filter(t=>t.uid===e))).subscribe(t=>{this.myProfile=t[0]})})}getComments(){this.commentsService.fetchPosts(this.petId).pipe((0,y.U)(t=>{let e=t;return e.sort((t,e)=>t.date<e.date?1:-1),e})).subscribe(t=>{this.comments=t})}sendComment(){const t={userId:"1",text:this.commentForm.value.comment,date:new Date,emitterName:`${this.myProfile.name} ${this.myProfile.lastname}`,emitterImg:this.myProfile.imgUrl};this.commentsService.addCommentByPet(this.petId,t).subscribe(t=>{this.getComments()}),this.commentForm.reset()}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.gz),d.Y36(Q),d.Y36(E.K),d.Y36(l.O),d.Y36(p.e))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-pet-comments"]],decls:4,vars:2,consts:[[1,"pet-comments"],["class","card pet-card",4,"ngIf"],[1,"comments"],[3,"comment",4,"ngFor","ngForOf"],[1,"card","pet-card"],[1,"pet"],[1,"pet-card-img"],["alt","",3,"src"],[1,"pet-card-info"],[1,"items"],[1,"kind"],[1,"message-input",3,"formGroup"],["type","text","formControlName","comment","placeholder","Escribe un comentario..."],["mat-mini-fab","","color","primary",3,"disabled","click"],[3,"comment"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.YNc(1,D,26,9,"div",1),d.TgZ(2,"div",2),d.YNc(3,H,1,1,"app-comment",3),d.qZA(),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",e.pet),d.xp6(2),d.Q6J("ngForOf",e.comments))},directives:[i.O5,i.sg,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,O.lW,u.Hw,K],pipes:[b.b],styles:[".card[_ngcontent-%COMP%]{margin-bottom:8px}.pet-card[_ngcontent-%COMP%]{padding:16px}.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]{display:flex;grid-gap:16px;gap:16px}.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]   .pet-card-img[_ngcontent-%COMP%]{width:140px;height:140px;display:flex;justify-content:center;align-items:center;overflow:hidden;border-radius:8px}.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]   .pet-card-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]   .pet-card-info[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:column;justify-content:space-between}.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]   .pet-card-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:left}.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]   .pet-card-info[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]   .pet-card-info[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:70px;width:28%;border-radius:8px;background-color:#fff4e5;border:1px solid #f2b84b;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#f2b84b}.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]   .pet-card-info[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.pet-card[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{margin-top:16px;display:flex;justify-content:space-between}.pet-card[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;border:1px solid #ccc;border-radius:8px;padding:0 16px;font-family:inherit}.pet-comments[_ngcontent-%COMP%]{width:800px;margin:32px auto}.img[_ngcontent-%COMP%]{width:60px;height:60px;overflow:hidden;border-radius:50%;display:flex;justify-content:center;align-items:center}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.pet-comments[_ngcontent-%COMP%]{width:90%}}@media (max-width: 576px){.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]   .pet-card-info[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{display:flex}.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]   .pet-card-info[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:48%;padding:4px}.pet-card[_ngcontent-%COMP%]   .pet[_ngcontent-%COMP%]   .pet-card-info[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .kind[_ngcontent-%COMP%]{display:none}}"]}),t})();const $=[{path:"",children:[{path:"",component:J},Object.assign({path:"add",component:Z},(0,B.nW)(()=>(0,B.ik)(["/403"]))),{path:":id",component:w},Object.assign({path:":id/comments",component:z},(0,B.nW)(()=>(0,B.ik)(["/403"]))),{path:"**",redirectTo:""}]}];let X=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.Bz.forChild($)],o.Bz]}),t})();var G=n(5317),R=n(4466);let W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[i.ez,X,G.q,r.UX,r.u5,N.JF,R.m]]}),t})()}}]);